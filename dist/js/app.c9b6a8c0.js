(()=>{"use strict";var e={901:(e,t,a)=>{var s=a(751),n=a(641);const r={id:"app"};function l(e,t,a,s,l,i){const o=(0,n.g2)("router-link"),d=(0,n.g2)("router-view");return(0,n.uX)(),(0,n.CE)("div",r,[(0,n.Lk)("header",null,[(0,n.Lk)("nav",null,[(0,n.bF)(o,{to:"/dashboard"},{default:(0,n.k6)(()=>t[1]||(t[1]=[(0,n.eW)("Dashboard")])),_:1,__:[1]}),(0,n.bF)(o,{to:"/patients"},{default:(0,n.k6)(()=>t[2]||(t[2]=[(0,n.eW)("Patients")])),_:1,__:[2]}),(0,n.bF)(o,{to:"/ward"},{default:(0,n.k6)(()=>t[3]||(t[3]=[(0,n.eW)("Wards View")])),_:1,__:[3]}),(0,n.bF)(o,{to:"/teams"},{default:(0,n.k6)(()=>t[4]||(t[4]=[(0,n.eW)("Teams View")])),_:1,__:[4]})]),(0,n.Lk)("button",{onClick:t[0]||(t[0]=(...t)=>e.logout&&e.logout(...t)),class:"logout-btn"},"Logout")]),(0,n.Lk)("main",null,[(0,n.bF)(d)])])}const i={name:"App"};var o=a(262);const d=(0,o.A)(i,[["render",l]]),c=d;var u=a(220),f=a(33);const h={class:"login-container"},p={class:"login-box"},m={class:"input-group"},v={class:"input-group"},b={key:0,class:"error-message"};function k(e,t,a,r,l,i){return(0,n.uX)(),(0,n.CE)("div",h,[(0,n.Lk)("div",p,[t[7]||(t[7]=(0,n.Lk)("h2",null,"Hospital Management System",-1)),(0,n.Lk)("form",{onSubmit:t[2]||(t[2]=(0,s.D$)((...e)=>i.handleLogin&&i.handleLogin(...e),["prevent"]))},[(0,n.Lk)("div",m,[t[3]||(t[3]=(0,n.Lk)("label",{for:"username"},"Username",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>l.username=e),id:"username",required:""},null,512),[[s.Jo,l.username]])]),(0,n.Lk)("div",v,[t[4]||(t[4]=(0,n.Lk)("label",{for:"password"},"Password",-1)),(0,n.bo)((0,n.Lk)("input",{type:"password","onUpdate:modelValue":t[1]||(t[1]=e=>l.password=e),id:"password",required:""},null,512),[[s.Jo,l.password]])]),e.error?((0,n.uX)(),(0,n.CE)("p",b,(0,f.v_)(e.error),1)):(0,n.Q3)("",!0),t[5]||(t[5]=(0,n.Lk)("button",{type:"submit",class:"login-button"},"Login",-1)),t[6]||(t[6]=(0,n.Lk)("p",{class:"hint"},[(0,n.eW)(" Hint: Use "),(0,n.Lk)("strong",null,"admin"),(0,n.eW)(" / "),(0,n.Lk)("strong",null,"password")],-1))],32)])])}const L={data(){return{username:"",password:""}},methods:{handleLogin(){"admin"===this.username&&"password"===this.password?(localStorage.setItem("isAuthenticated","true"),this.$router.push("/dashboard")):alert("Invalid credentials")}}},g=(0,o.A)(L,[["render",k],["__scopeId","data-v-48de9cc6"]]),w=g,y={class:"dashboard-main"},_={class:"card"},C={class:"grid"};function E(e,t){const a=(0,n.g2)("PatientCard");return(0,n.uX)(),(0,n.CE)("main",y,[t[1]||(t[1]=(0,n.Fv)('<section class="stats" data-v-45936632><div class="stat-card" data-v-45936632><h3 data-v-45936632>Patients</h3><div class="stat-number" data-v-45936632>120</div></div><div class="stat-card" data-v-45936632><h3 data-v-45936632>Wards</h3><div class="stat-number" data-v-45936632>8</div></div><div class="stat-card" data-v-45936632><h3 data-v-45936632>Doctors</h3><div class="stat-number" data-v-45936632>25</div></div></section>',1)),(0,n.Lk)("section",_,[t[0]||(t[0]=(0,n.Lk)("h2",null,"All Patients",-1)),(0,n.Lk)("div",C,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.patients,e=>((0,n.uX)(),(0,n.Wv)(a,{key:e.id,patient:e},null,8,["patient"]))),128))])])])}const P={},W=(0,o.A)(P,[["render",E],["__scopeId","data-v-45936632"]]),T=W,X={class:"top-action-buttons"},S={key:0,class:"transfer-form"},A=["value"],F=["value"],O=["value"],I={class:"card"},V=["value"],j=["value"],B=["value"],U={class:"patient-list"},$={class:"patient-info"},x={class:"patient-checkbox-wrapper"},D=["checked","onChange"];function q(e,t,a,r,l,i){return(0,n.uX)(),(0,n.CE)("div",null,[t[31]||(t[31]=(0,n.Lk)("h1",null,"Patient Management",-1)),(0,n.Lk)("div",X,[(0,n.Lk)("button",{class:"action-btn",onClick:t[0]||(t[0]=e=>l.showTransfer=!l.showTransfer)}," Transfer "),t[12]||(t[12]=(0,n.Lk)("button",{class:"action-btn"},"Treatment",-1)),t[13]||(t[13]=(0,n.Lk)("button",{class:"action-btn"},"Discharge",-1))]),l.showTransfer?((0,n.uX)(),(0,n.CE)("div",S,[(0,n.bo)((0,n.Lk)("select",{"onUpdate:modelValue":t[1]||(t[1]=e=>l.transfer.team=e),class:"select-field"},[t[14]||(t[14]=(0,n.Lk)("option",{disabled:"",value:""},"Select New Team",-1)),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(l.teams,e=>((0,n.uX)(),(0,n.CE)("option",{key:e.id,value:e.id},(0,f.v_)(e.team_code),9,A))),128))],512),[[s.u1,l.transfer.team]]),(0,n.bo)((0,n.Lk)("select",{"onUpdate:modelValue":t[2]||(t[2]=e=>l.transfer.ward=e),class:"select-field"},[t[15]||(t[15]=(0,n.Lk)("option",{disabled:"",value:""},"Select New Ward",-1)),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(l.transferWards,e=>((0,n.uX)(),(0,n.CE)("option",{key:e.id,value:e.id},(0,f.v_)(e.ward_code),9,F))),128))],512),[[s.u1,l.transfer.ward]]),(0,n.bo)((0,n.Lk)("select",{"onUpdate:modelValue":t[3]||(t[3]=e=>l.transfer.bed=e),class:"select-field"},[t[16]||(t[16]=(0,n.Lk)("option",{disabled:"",value:""},"Select New Bed",-1)),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(l.transferBeds,e=>((0,n.uX)(),(0,n.CE)("option",{key:e.id,value:e.id},(0,f.v_)(e.bed_code),9,O))),128))],512),[[s.u1,l.transfer.bed]]),(0,n.Lk)("button",{class:"confirm-transfer-btn",onClick:t[4]||(t[4]=(...e)=>i.handleTransfer&&i.handleTransfer(...e))}," Confirm Transfer ")])):(0,n.Q3)("",!0),(0,n.Lk)("div",I,[t[29]||(t[29]=(0,n.Lk)("h2",null,"Add New Patient",-1)),(0,n.Lk)("form",{onSubmit:t[11]||(t[11]=(0,s.D$)((...e)=>i.handleSubmit&&i.handleSubmit(...e),["prevent"]))},[(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":t[5]||(t[5]=e=>l.form.name=e),placeholder:"Patient Name",required:"",class:"input-field"},null,512),[[s.Jo,l.form.name]]),(0,n.bo)((0,n.Lk)("input",{type:"date","onUpdate:modelValue":t[6]||(t[6]=e=>l.form.dob=e),placeholder:"Date of Birth",required:"",class:"input-field"},null,512),[[s.Jo,l.form.dob]]),(0,n.bo)((0,n.Lk)("select",{"onUpdate:modelValue":t[7]||(t[7]=e=>l.form.gender=e),required:"",class:"select-field"},t[17]||(t[17]=[(0,n.Lk)("option",{disabled:"",value:""},"Select Gender",-1),(0,n.Lk)("option",{value:"Male"},"Male",-1),(0,n.Lk)("option",{value:"Female"},"Female",-1),(0,n.Lk)("option",{value:"Other"},"Other",-1)]),512),[[s.u1,l.form.gender]]),(0,n.bo)((0,n.Lk)("select",{"onUpdate:modelValue":t[8]||(t[8]=e=>l.form.team=e),required:"",class:"select-field"},[t[18]||(t[18]=(0,n.Lk)("option",{disabled:"",value:""},"Assign Team",-1)),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(l.teams,e=>((0,n.uX)(),(0,n.CE)("option",{key:e.id,value:e.id},(0,f.v_)(e.team_code),9,V))),128))],512),[[s.u1,l.form.team]]),(0,n.bo)((0,n.Lk)("select",{"onUpdate:modelValue":t[9]||(t[9]=e=>l.form.ward=e),required:"",class:"select-field"},[t[19]||(t[19]=(0,n.Lk)("option",{disabled:"",value:""},"Select Ward",-1)),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(l.wards,e=>((0,n.uX)(),(0,n.CE)("option",{key:e.id,value:e.id},(0,f.v_)(e.ward_code),9,j))),128))],512),[[s.u1,l.form.ward]]),(0,n.bo)((0,n.Lk)("select",{"onUpdate:modelValue":t[10]||(t[10]=e=>l.form.bed=e),required:"",class:"select-field"},[t[20]||(t[20]=(0,n.Lk)("option",{disabled:"",value:""},"Select Bed",-1)),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(l.beds,e=>((0,n.uX)(),(0,n.CE)("option",{key:e.id,value:e.id},(0,f.v_)(e.bed_code),9,B))),128))],512),[[s.u1,l.form.bed]]),t[21]||(t[21]=(0,n.Lk)("button",{type:"submit"},"Add Patient",-1))],32),t[30]||(t[30]=(0,n.Lk)("h2",null,"Current Patients",-1)),(0,n.Lk)("div",U,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(l.patients,e=>((0,n.uX)(),(0,n.CE)("div",{key:e.id,class:(0,f.C4)(["patient-card",{selected:l.selectedPatients.includes(e.id)}])},[(0,n.Lk)("div",$,[(0,n.Lk)("p",null,[t[22]||(t[22]=(0,n.Lk)("strong",null,"Name:",-1)),(0,n.eW)(" "+(0,f.v_)(e.name),1)]),(0,n.Lk)("p",null,[t[23]||(t[23]=(0,n.Lk)("strong",null,"DOB:",-1)),(0,n.eW)(" "+(0,f.v_)(new Date(e.dob).toISOString().split("T")[0]),1)]),(0,n.Lk)("p",null,[t[24]||(t[24]=(0,n.Lk)("strong",null,"Gender:",-1)),(0,n.eW)(" "+(0,f.v_)(e.gender),1)]),(0,n.Lk)("p",null,[t[25]||(t[25]=(0,n.Lk)("strong",null,"Team:",-1)),(0,n.eW)(" "+(0,f.v_)(e.team),1)]),(0,n.Lk)("p",null,[t[26]||(t[26]=(0,n.Lk)("strong",null,"Ward:",-1)),(0,n.eW)(" "+(0,f.v_)(e.ward),1)]),(0,n.Lk)("p",null,[t[27]||(t[27]=(0,n.Lk)("strong",null,"Bed:",-1)),(0,n.eW)(" "+(0,f.v_)(e.bed),1)])]),(0,n.Lk)("div",x,[(0,n.Lk)("input",{type:"checkbox",checked:i.isSelected(e),onChange:t=>i.toggleSelect(e),class:"patient-checkbox"},null,40,D),t[28]||(t[28]=(0,n.Lk)("label",{class:"checkbox-label"},"Select",-1))])],2))),128))])])])}const K={data(){return{form:{name:"",dob:"",gender:"",team:"",ward:"",bed:""},teams:[],wards:[],beds:[],transferWards:[],transferBeds:[],patients:[],selectedPatients:[],showTransfer:!1,transfer:{team:"",ward:"",bed:"",gender:""}}},watch:{"form.gender":function(){this.fetchAvailableWards(this.form.team,this.form.gender,"form")},"form.team":function(){this.fetchAvailableWards(this.form.team,this.form.gender,"form")},"form.ward":function(){this.fetchAvailableBeds(this.form.ward,"form")},"transfer.team":function(){const e=this.selectedPatients.length>0?this.selectedPatients[0].ward:null;this.fetchAvailableWards(this.transfer.team,this.transfer.gender,"transfer",e)},"transfer.ward":function(){this.fetchAvailableBeds(this.transfer.ward,"transfer")}},methods:{async fetchTeamsList(){try{const e=await fetch("/api/patients/teams"),t=await e.json();this.teams=t}catch(e){console.error("Error fetching teams:",e)}},async fetchAvailableWards(e,t,a="form",s=null){if(e&&t)try{let n=`/api/patients/wards?team=${e}&gender=${t}`;s&&(n+=`&excludeWard=${s}`);const r=await fetch(n),l=await r.json();"form"===a?this.wards=l:"transfer"==a&&(this.transferWards=l)}catch(n){console.error("Error fetching wards:",n)}},async fetchAvailableBeds(e,t="form"){if(e)try{const a=await fetch(`/api/patients/beds?ward=${e}`),s=await a.json();"form"==t?this.beds=s:"transfer"===t&&(this.transferBeds=s)}catch(a){console.error("Error fetching beds:",a)}},async handleSubmit(){try{const e=await fetch("/api/patients/newpatients",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(this.form)});if(!e.ok)throw new Error("Failed to add patient");const t=await e.json();alert(`Patient added successfully! ID: ${t.patientId}`),this.form={name:"",dob:"",gender:"",team:"",ward:"",bed:""}}catch(e){console.error("Error submitting form:",e),alert("Error adding patient. Please try again.")}await this.fetchPatients()},async fetchPatients(){try{const e=await fetch("/api/patients/allcurrent"),t=await e.json();this.patients=t}catch(e){console.error("Error fetching patients:",e)}},toggleSelect(e){1===this.selectedPatients.length&&this.selectedPatients[0].id===e.id?(this.selectedPatients=[],this.transfer.gender=""):(this.selectedPatients=[e],this.transfer.gender=e.gender)},isSelected(e){return 1===this.selectedPatients.length&&this.selectedPatients[0].id===e.id},handleTransfer(){this.transfer.team&&this.transfer.ward&&this.transfer.bed&&this.selectedPatients.length>0?(alert(`Transferred patients: ${this.selectedPatients.join(", ")} to Team: ${this.transfer.team}, Ward: ${this.transfer.ward}, Bed: ${this.transfer.bed}`),this.showTransfer=!1,alert("Selected patients transferred successfully.")):alert("Please select patients and fill all transfer details.")}},mounted(){this.fetchTeamsList(),this.fetchPatients()}},N=(0,o.A)(K,[["render",q]]),J=N;function M(e,t){return(0,n.uX)(),(0,n.CE)("div",null,t[0]||(t[0]=[(0,n.Lk)("h1",null,"Teams View",-1)]))}const G={},H=(0,o.A)(G,[["render",M]]),Q=H;function z(e,t){return(0,n.uX)(),(0,n.CE)("div",null,t[0]||(t[0]=[(0,n.Lk)("h1",null,"Wards View",-1)]))}const R={},Y=(0,o.A)(R,[["render",z]]),Z=Y,ee=[{path:"/",name:"Login",component:w},{path:"/dashboard",name:"Dashboard",component:T},{path:"/patients",name:"Patients",component:J},{path:"/teams",name:"Teams",component:Q},{path:"/ward",name:"Ward",component:Z}],te=(0,u.aE)({history:(0,u.Bt)(),routes:ee}),ae=te;(0,s.Ef)(c).use(ae).mount("#app")}},t={};function a(s){var n=t[s];if(void 0!==n)return n.exports;var r=t[s]={exports:{}};return e[s](r,r.exports,a),r.exports}a.m=e,(()=>{var e=[];a.O=(t,s,n,r)=>{if(!s){var l=1/0;for(c=0;c<e.length;c++){for(var[s,n,r]=e[c],i=!0,o=0;o<s.length;o++)(!1&r||l>=r)&&Object.keys(a.O).every(e=>a.O[e](s[o]))?s.splice(o--,1):(i=!1,r<l&&(l=r));if(i){e.splice(c--,1);var d=n();void 0!==d&&(t=d)}}return t}r=r||0;for(var c=e.length;c>0&&e[c-1][2]>r;c--)e[c]=e[c-1];e[c]=[s,n,r]}})(),(()=>{a.d=(e,t)=>{for(var s in t)a.o(t,s)&&!a.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}})(),(()=>{a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()})(),(()=>{a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t)})(),(()=>{var e={524:0};a.O.j=t=>0===e[t];var t=(t,s)=>{var n,r,[l,i,o]=s,d=0;if(l.some(t=>0!==e[t])){for(n in i)a.o(i,n)&&(a.m[n]=i[n]);if(o)var c=o(a)}for(t&&t(s);d<l.length;d++)r=l[d],a.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return a.O(c)},s=self["webpackChunkhospital_management_system"]=self["webpackChunkhospital_management_system"]||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))})();var s=a.O(void 0,[504],()=>a(901));s=a.O(s)})();
//# sourceMappingURL=app.c9b6a8c0.js.map